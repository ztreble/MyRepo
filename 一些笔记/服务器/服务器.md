- 你认为linux服务器程序规范有哪些？
1.服务器使用守护进程运行，守护进程没有控制终端
2.通常有一套日志系统
3.一般使用非root身份运行
4.通常是可配置的
5.会在启动的时候生成pid文件，以记录该后台进程的pid
6.需要考虑系统资源和限制
- 你认为服务器包括那几个基本模块？ 分别有什么用？
1. I/O处理单元 等待并1且接收客户连接，接受客户数据，将服务器响应数据返回客户端
2. 逻辑单元 逻辑单元往往是一个进程或者是线程，分析并且处理客户数据，将结果传给IO处理单元或者直接发送给客户端
3. 网络存储单元 数据库
4. 请求队列 请求队列是各个单元之间通信方式的抽象，往往被时限为被实现为池的一部分
- 什么叫非阻塞I/O？
阻塞和非阻塞能够被用于所有的文件描述符，非阻塞IO总是能立即返回，要根据errno来区分出错还是事件没有发生。
在事件已经发生的情况下使用非阻塞IO才是高效的
- 什么叫IO复用？
应用程序通过IO复用函数向内核注册一组事件，内核通过IO复用函数把就绪的事件通知给应用程序。IO复用函数本身是阻塞的。 
程序阻塞于IO复用系统调用，但是可以同时监听多个IO事件，对于io本身的写操作是非阻塞的
- 说一下Reactor模式和Proactor模式\      
同步IO用于实现Reactor模式
Reactor模式：
要求主线程（IO处理单元）只负责监听文件描述符上是否有事件发生，有的话立即将该事件通知工作线程
过程如下：
主线程向epoll内核事件表中注册socket上的读就绪事件，调用epoll_wait
socket中有数据可读，主线程将可读事件放入请求队列。再次调用epoll_wait
工作线程从socket读取数据处理请求，向epoll内核事件表中注册写就绪事件，可写时通知主线程
主线程将可写事件放入请求队列
唤醒工作线程，往socket写入服务器处理请求结果

异步IO用于实现Proactor模式
Proactor模式将所有的IO操作都交给主线程和内核处理
过程如下：
主线程调用aio_read向内核注册读完成事件
主线程告诉内核用户读缓冲区位置、读完成后操作
主线程读取用户缓冲区，通知应用程序数据已经可用
应用程序使用预先定义好的信号处理函数选择工作线程来处理用户请求，处理完后工作线程向内核注册socket写完成事件
主线程继续处理其它逻辑
内核通知应用程序数据已经发送完毕
应用程序做善后处理

- 半同步/半异步模式是如何实现的？       
同步线程用于处理客户逻辑，异步线程用于处理IO事件

- 说一下poll的服务端怎么实现的？
使用socket()得到监听套接字，调用bind()绑定套接字和地址，调用listen()监听套接字,设置一个结构体表示用户数据，然后设置一个pollfd数组 监听用户数据
在循环体中调用poll对数据监听
连接到来时，在pollfd数组中为用户分配一个位置，套接字设置为accept得到的套接字并且设置为非阻塞。

-  怎么监听多个端口？
用多个socket监听，使用IO复用技术

- 半同步/半异步模式是如何实现的？
同步线程用于处理客户逻辑，异步线程用于处理IO事件





